{"ast":null,"code":"// Servicio API para consumir el backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\nexport async function fetchGalleries() {\n  const res = await fetch(`${API_URL}/galleries`);\n  if (!res.ok) throw new Error('Error al obtener galerías');\n  return res.json();\n}\nexport async function createGallery(data) {\n  const res = await fetch(`${API_URL}/galleries`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  if (!res.ok) throw new Error('Error al crear galería');\n  return res.json();\n}\nexport async function fetchGalleryById(id) {\n  const res = await fetch(`${API_URL}/galleries/id/${id}`);\n  if (!res.ok) throw new Error('Error al obtener galería');\n  return res.json();\n}\nexport async function setAllowDownload(id, allowDownload) {\n  try {\n    console.log('Enviando PATCH a /allow-download con:', {\n      id,\n      allowDownload\n    });\n    const res = await fetch(`${API_URL}/galleries/${id}/allow-download`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        allowDownload\n      })\n    });\n    const text = await res.text();\n    console.log('Respuesta setAllowDownload:', {\n      status: res.status,\n      statusText: res.statusText,\n      response: text\n    });\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${text || 'Error desconocido'}`);\n    }\n    return text ? JSON.parse(text) : {};\n  } catch (error) {\n    console.error('Error en setAllowDownload:', error);\n    throw error;\n  }\n}\nexport async function setAllowFinalDownload(id, allowFinalDownload) {\n  try {\n    console.log('Enviando PATCH a /allow-final-download con:', {\n      id,\n      allowFinalDownload\n    });\n    const res = await fetch(`${API_URL}/galleries/${id}/allow-final-download`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        allowFinalDownload\n      })\n    });\n    const text = await res.text();\n    console.log('Respuesta setAllowFinalDownload:', {\n      status: res.status,\n      statusText: res.statusText,\n      response: text\n    });\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${text || 'Error desconocido'}`);\n    }\n    return text ? JSON.parse(text) : {};\n  } catch (error) {\n    console.error('Error en setAllowFinalDownload:', error);\n    throw error;\n  }\n}\nexport async function uploadPhotos({\n  galleryId,\n  owner,\n  files\n}) {\n  const formData = new FormData();\n  formData.append('galleryId', galleryId);\n  formData.append('owner', owner);\n  for (const file of files) {\n    formData.append('photos', file);\n  }\n  const res = await fetch(`${API_URL}/photos/upload-multiple`, {\n    method: 'POST',\n    body: formData\n  });\n  if (!res.ok) throw new Error('Error al subir fotos');\n  return res.json();\n}\nexport async function deleteAllPhotosFromGallery(galleryId) {\n  const res = await fetch(`${API_URL}/photos/gallery/${galleryId}`, {\n    method: 'DELETE'\n  });\n  if (!res.ok) throw new Error('Error al eliminar todas las fotos');\n  return await res.json();\n}\nexport async function deleteGallery(id) {\n  try {\n    console.log(`Eliminando galería con ID: ${id}`);\n    const res = await fetch(`${API_URL}/galleries/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const contentType = res.headers.get('content-type');\n    let errorData = {};\n    if (!res.ok) {\n      try {\n        errorData = await res.json();\n      } catch (jsonError) {\n        const text = await res.text();\n        console.error('Error al parsear respuesta de error:', text);\n        throw new Error(`Error al eliminar la galería: ${res.status} ${res.statusText}`);\n      }\n      throw new Error(errorData.message || `Error al eliminar la galería: ${res.status} ${res.statusText}`);\n    }\n    try {\n      return await res.json();\n    } catch (jsonError) {\n      console.log('La respuesta no contiene JSON, se asume éxito');\n      return {\n        success: true\n      };\n    }\n  } catch (error) {\n    console.error('Error en deleteGallery:', error);\n    throw error;\n  }\n}\nexport async function updateGalleryStatus(id, isActive) {\n  const res = await fetch(`${API_URL}/galleries/${id}/status`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      isActive\n    })\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.message || 'Error al actualizar el estado de la galería');\n  }\n  return await res.json();\n}\nexport async function deletePhoto(photoId) {\n  const res = await fetch(`${API_URL}/photos/${photoId}`, {\n    method: 'DELETE'\n  });\n  if (!res.ok) throw new Error('Error al eliminar foto');\n  return res.json();\n}","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","fetchGalleries","res","fetch","ok","Error","json","createGallery","data","method","headers","body","JSON","stringify","fetchGalleryById","id","setAllowDownload","allowDownload","console","log","text","status","statusText","response","parse","error","setAllowFinalDownload","allowFinalDownload","uploadPhotos","galleryId","owner","files","formData","FormData","append","file","deleteAllPhotosFromGallery","deleteGallery","contentType","get","errorData","jsonError","message","success","updateGalleryStatus","isActive","deletePhoto","photoId"],"sources":["C:/Users/elmer/Escritorio/Proyectos Desarrollo Web/Pixieset_Personalizado_Edgar/frontend/src/services/api.js"],"sourcesContent":["// Servicio API para consumir el backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:4000';\n\nexport async function fetchGalleries() {\n  const res = await fetch(`${API_URL}/galleries`);\n  if (!res.ok) throw new Error('Error al obtener galerías');\n  return res.json();\n}\n\nexport async function createGallery(data) {\n  const res = await fetch(`${API_URL}/galleries`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  });\n  if (!res.ok) throw new Error('Error al crear galería');\n  return res.json();\n}\n\nexport async function fetchGalleryById(id) {\n  const res = await fetch(`${API_URL}/galleries/id/${id}`);\n  if (!res.ok) throw new Error('Error al obtener galería');\n  return res.json();\n}\n\nexport async function setAllowDownload(id, allowDownload) {\n  try {\n    console.log('Enviando PATCH a /allow-download con:', { id, allowDownload });\n    const res = await fetch(`${API_URL}/galleries/${id}/allow-download`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ allowDownload })\n    });\n    const text = await res.text();\n    console.log('Respuesta setAllowDownload:', {\n      status: res.status,\n      statusText: res.statusText,\n      response: text\n    });\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${text || 'Error desconocido'}`);\n    }\n    return text ? JSON.parse(text) : {};\n  } catch (error) {\n    console.error('Error en setAllowDownload:', error);\n    throw error;\n  }\n}\n\nexport async function setAllowFinalDownload(id, allowFinalDownload) {\n  try {\n    console.log('Enviando PATCH a /allow-final-download con:', { id, allowFinalDownload });\n    const res = await fetch(`${API_URL}/galleries/${id}/allow-final-download`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ allowFinalDownload })\n    });\n    const text = await res.text();\n    console.log('Respuesta setAllowFinalDownload:', {\n      status: res.status,\n      statusText: res.statusText,\n      response: text\n    });\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${text || 'Error desconocido'}`);\n    }\n    return text ? JSON.parse(text) : {};\n  } catch (error) {\n    console.error('Error en setAllowFinalDownload:', error);\n    throw error;\n  }\n}\n\n\nexport async function uploadPhotos({ galleryId, owner, files }) {\n  const formData = new FormData();\n  formData.append('galleryId', galleryId);\n  formData.append('owner', owner);\n  for (const file of files) {\n    formData.append('photos', file);\n  }\n  const res = await fetch(`${API_URL}/photos/upload-multiple`, {\n    method: 'POST',\n    body: formData,\n  });\n  if (!res.ok) throw new Error('Error al subir fotos');\n  return res.json();\n}\n\nexport async function deleteAllPhotosFromGallery(galleryId) {\n  const res = await fetch(`${API_URL}/photos/gallery/${galleryId}`, { method: 'DELETE' });\n  if (!res.ok) throw new Error('Error al eliminar todas las fotos');\n  return await res.json();\n}\n\nexport async function deleteGallery(id) {\n  try {\n    console.log(`Eliminando galería con ID: ${id}`);\n    const res = await fetch(`${API_URL}/galleries/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    \n    const contentType = res.headers.get('content-type');\n    let errorData = {};\n    \n    if (!res.ok) {\n      try {\n        errorData = await res.json();\n      } catch (jsonError) {\n        const text = await res.text();\n        console.error('Error al parsear respuesta de error:', text);\n        throw new Error(`Error al eliminar la galería: ${res.status} ${res.statusText}`);\n      }\n      throw new Error(errorData.message || `Error al eliminar la galería: ${res.status} ${res.statusText}`);\n    }\n    \n    try {\n      return await res.json();\n    } catch (jsonError) {\n      console.log('La respuesta no contiene JSON, se asume éxito');\n      return { success: true };\n    }\n  } catch (error) {\n    console.error('Error en deleteGallery:', error);\n    throw error;\n  }\n}\n\nexport async function updateGalleryStatus(id, isActive) {\n  const res = await fetch(`${API_URL}/galleries/${id}/status`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ isActive }),\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.message || 'Error al actualizar el estado de la galería');\n  }\n  return await res.json();\n}\n\nexport async function deletePhoto(photoId) {\n  const res = await fetch(`${API_URL}/photos/${photoId}`, {\n    method: 'DELETE',\n  });\n  if (!res.ok) throw new Error('Error al eliminar foto');\n  return res.json();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}